#!/usr/bin/env bash

# Use nix flake for development environment
use flake

# Setup environment variables
export CACHE_DIR="${HOME}/.nix-chucknorris-cache"
export LOG_DIR="/tmp/chucknorris-debug"

# Ensure directories exist
mkdir -p "$CACHE_DIR"
mkdir -p "$LOG_DIR"

# Add pre-commit hook if not already setup
if [ ! -f .git/hooks/pre-commit ]; then
  mkdir -p .git/hooks
  ln -sf ../../pre-commit.sh .git/hooks/pre-commit
  echo "Pre-commit hook installed."
fi

# Print environment info
echo "ChuckNorris MCP Development Environment"
echo "--------------------------------------"
echo "Node.js: $(node -v)"
echo "Cache directory: $CACHE_DIR"
echo "Log directory: $LOG_DIR"
echo "Pre-commit hook: $(realpath .git/hooks/pre-commit 2>/dev/null || echo 'Not installed')" 